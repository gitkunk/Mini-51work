#include <REGX52.H>

sbit BEEP=P2^5;//接喇叭或蜂鸣器的接口
static bit Music_Switch;			//音乐启停开关(按键控制)
static bit Music_Stop;				//音乐暂停继续开关
static bit flag;							//音乐启停开关(标志位)(0/1-->控制蜂鸣器响与不响)

static unsigned int h,i,hz;						//hz-频率(该参数对应音调的频率) h-音调(该参数对应音调数组song(do,re,mi,fa...)) i-计数参数(控制音乐的进行)
static unsigned char jiep;							//节拍参数控制音符的持续时间,在定时器二中计时(一次50ms)


static unsigned int code G_fre[]={63928,64103,64260,			//#2,4,5 低音
64331,64463,64580,64633,64732,64820,64898,64934	//#5,#6,1,#1,#2,4,5,#5 中音
,0,64777};//#G调音阶，最后一个为中音3
static unsigned char code song[]={
//1,6,5,3,6,3,5,3,6,3,5,6,1,6,11,12,
//1,6,0,3,1,3,1,3,0,3,1,6,1,6,11,12,
//1,3,1,3,6,6,5,3,6,3,5,6,1,6,11,12,
//1,6,0,3,1,3,1,3,0,3,1,6,1,6,3,12,
//6,12,5,12,1,6,1,6,11,6,0,6,1,6,11,6,6,3,6,3,5,3,6,3,5,6,1,6,11,12,
//1,6,0,3,1,3,1,3,0,3,1,6,1,6,1,12,11,6,
//1,6,0,3,1,3,1,3,0,3,1,6,1,6,3,12,
//10,12,9,12,7,12,5,6,5,6,10,12,9,12,7,6,5,12,7,12,11,6,
//5,3,5,6,5,6,12,6,12,6,12,6,8,6,9,6,
//1,6,5,6,5,6,8,12,11,12,11,12,11,6,1,3,1,6,11,12,
//1,6,5,6,5,6,8,12,11,12,11,12,11,6,1,3,1,6,11,12,11,12,
//1,6,5,6,5,6,8,12,11,12,11,12,11,6,1,3,1,6,11,12,
//1,6,5,6,5,6,8,12,11,12,11,12,11,6,1,3,1,6,11,12,11,12,
5,3,5,3,8,3,5,3,5,3,5,3,5,3,5,3,5,3,4,3,5,6,5,6,
5,3,5,3,8,3,5,3,5,3,5,3,5,3,5,3,5,3,4,3,5,6,5,6,
}; //歌谱 2个一组(0,0)(音调,节拍(一拍对应值为12))

void sing();
void Sing_Init();
void Sing_Off();
void Sing_On();

//unsigned int code fre[]={64400,64524,64580,64684,64777,64820,64898,64968,65030,65058,65110,65157,65178,65217};//F调音阶
//unsigned char code song[]={6,9, 6,3, 7,12, 6,12, 9,12, 8,24, 6,9, 6,3, 7,12,
//6,12, 10,12, 9,24, 6,9, 6,3, 13,12, 11,12, 8,12, 7,12,
//12,9, 12,3, 11,12, 9,12, 10,12, 9,24}; //歌谱 2个一组(0,0)(音调,节拍)
